"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.apiClient = void 0;
const axios_1 = __importDefault(require("axios"));
class ApiClient {
    client;
    constructor() {
        this.client = axios_1.default.create({
            baseURL: process.env.NEXT_PUBLIC_API_URL || 'https://daa1ivz70pn2k.cloudfront.net',
            timeout: 10000,
            headers: {
                'Content-Type': 'application/json',
            },
        });
        // レスポンスインターセプター
        this.client.interceptors.response.use((response) => response, (error) => {
            console.error('API Error:', error);
            return Promise.reject(error);
        });
    }
    // ヘルスチェック
    async healthCheck() {
        const response = await this.client.get('/api/health');
        return response.data;
    }
    // Lambda Integration ヘルスチェック
    async lambdaHealthCheck() {
        const response = await this.client.get('/v1/health');
        return response.data;
    }
    // セッション管理
    async getSession() {
        const response = await this.client.get('/v1/session');
        return response.data;
    }
    // 権限確認
    async getPermissions() {
        const response = await this.client.get('/v1/permissions');
        return response.data.permissions;
    }
    // 文書一覧取得
    async getDocuments() {
        const response = await this.client.get('/v1/documents');
        return response.data.documents;
    }
    // 検索
    async search(query) {
        const response = await this.client.post('/v1/search', { query });
        return response.data;
    }
    // ログ取得
    async getLogs() {
        const response = await this.client.get('/v1/logs');
        return response.data.logs;
    }
    // メトリクス取得
    async getMetrics() {
        const response = await this.client.get('/v1/metrics');
        return response.data;
    }
}
exports.apiClient = new ApiClient();
exports.default = exports.apiClient;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY2xpZW50LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiY2xpZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7OztBQUFBLGtEQUE0RDtBQUc1RCxNQUFNLFNBQVM7SUFDTCxNQUFNLENBQWdCO0lBRTlCO1FBQ0UsSUFBSSxDQUFDLE1BQU0sR0FBRyxlQUFLLENBQUMsTUFBTSxDQUFDO1lBQ3pCLE9BQU8sRUFBRSxPQUFPLENBQUMsR0FBRyxDQUFDLG1CQUFtQixJQUFJLHNDQUFzQztZQUNsRixPQUFPLEVBQUUsS0FBSztZQUNkLE9BQU8sRUFBRTtnQkFDUCxjQUFjLEVBQUUsa0JBQWtCO2FBQ25DO1NBQ0YsQ0FBQyxDQUFDO1FBRUgsZ0JBQWdCO1FBQ2hCLElBQUksQ0FBQyxNQUFNLENBQUMsWUFBWSxDQUFDLFFBQVEsQ0FBQyxHQUFHLENBQ25DLENBQUMsUUFBUSxFQUFFLEVBQUUsQ0FBQyxRQUFRLEVBQ3RCLENBQUMsS0FBSyxFQUFFLEVBQUU7WUFDUixPQUFPLENBQUMsS0FBSyxDQUFDLFlBQVksRUFBRSxLQUFLLENBQUMsQ0FBQztZQUNuQyxPQUFPLE9BQU8sQ0FBQyxNQUFNLENBQUMsS0FBSyxDQUFDLENBQUM7UUFDL0IsQ0FBQyxDQUNGLENBQUM7SUFDSixDQUFDO0lBRUQsVUFBVTtJQUNWLEtBQUssQ0FBQyxXQUFXO1FBQ2YsTUFBTSxRQUFRLEdBQStCLE1BQU0sSUFBSSxDQUFDLE1BQU0sQ0FBQyxHQUFHLENBQUMsYUFBYSxDQUFDLENBQUM7UUFDbEYsT0FBTyxRQUFRLENBQUMsSUFBSSxDQUFDO0lBQ3ZCLENBQUM7SUFFRCw2QkFBNkI7SUFDN0IsS0FBSyxDQUFDLGlCQUFpQjtRQUNyQixNQUFNLFFBQVEsR0FBK0IsTUFBTSxJQUFJLENBQUMsTUFBTSxDQUFDLEdBQUcsQ0FBQyxZQUFZLENBQUMsQ0FBQztRQUNqRixPQUFPLFFBQVEsQ0FBQyxJQUFJLENBQUM7SUFDdkIsQ0FBQztJQUVELFVBQVU7SUFDVixLQUFLLENBQUMsVUFBVTtRQUNkLE1BQU0sUUFBUSxHQUEyQixNQUFNLElBQUksQ0FBQyxNQUFNLENBQUMsR0FBRyxDQUFDLGFBQWEsQ0FBQyxDQUFDO1FBQzlFLE9BQU8sUUFBUSxDQUFDLElBQUksQ0FBQztJQUN2QixDQUFDO0lBRUQsT0FBTztJQUNQLEtBQUssQ0FBQyxjQUFjO1FBQ2xCLE1BQU0sUUFBUSxHQUE2QyxNQUFNLElBQUksQ0FBQyxNQUFNLENBQUMsR0FBRyxDQUFDLGlCQUFpQixDQUFDLENBQUM7UUFDcEcsT0FBTyxRQUFRLENBQUMsSUFBSSxDQUFDLFdBQVcsQ0FBQztJQUNuQyxDQUFDO0lBRUQsU0FBUztJQUNULEtBQUssQ0FBQyxZQUFZO1FBQ2hCLE1BQU0sUUFBUSxHQUE2QyxNQUFNLElBQUksQ0FBQyxNQUFNLENBQUMsR0FBRyxDQUFDLGVBQWUsQ0FBQyxDQUFDO1FBQ2xHLE9BQU8sUUFBUSxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUM7SUFDakMsQ0FBQztJQUVELEtBQUs7SUFDTCxLQUFLLENBQUMsTUFBTSxDQUFDLEtBQWE7UUFDeEIsTUFBTSxRQUFRLEdBQWdDLE1BQU0sSUFBSSxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsWUFBWSxFQUFFLEVBQUUsS0FBSyxFQUFFLENBQUMsQ0FBQztRQUM5RixPQUFPLFFBQVEsQ0FBQyxJQUFJLENBQUM7SUFDdkIsQ0FBQztJQUVELE9BQU87SUFDUCxLQUFLLENBQUMsT0FBTztRQUNYLE1BQU0sUUFBUSxHQUFtQyxNQUFNLElBQUksQ0FBQyxNQUFNLENBQUMsR0FBRyxDQUFDLFVBQVUsQ0FBQyxDQUFDO1FBQ25GLE9BQU8sUUFBUSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUM7SUFDNUIsQ0FBQztJQUVELFVBQVU7SUFDVixLQUFLLENBQUMsVUFBVTtRQUNkLE1BQU0sUUFBUSxHQUF1QixNQUFNLElBQUksQ0FBQyxNQUFNLENBQUMsR0FBRyxDQUFDLGFBQWEsQ0FBQyxDQUFDO1FBQzFFLE9BQU8sUUFBUSxDQUFDLElBQUksQ0FBQztJQUN2QixDQUFDO0NBQ0Y7QUFFWSxRQUFBLFNBQVMsR0FBRyxJQUFJLFNBQVMsRUFBRSxDQUFDO0FBQ3pDLGtCQUFlLGlCQUFTLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgYXhpb3MsIHsgQXhpb3NJbnN0YW5jZSwgQXhpb3NSZXNwb25zZSB9IGZyb20gJ2F4aW9zJztcbmltcG9ydCB7IEFwaVJlc3BvbnNlLCBIZWFsdGhDaGVjaywgU2Vzc2lvbiwgRG9jdW1lbnQsIFNlYXJjaFJlc3VsdCB9IGZyb20gJ0AvdHlwZXMnO1xuXG5jbGFzcyBBcGlDbGllbnQge1xuICBwcml2YXRlIGNsaWVudDogQXhpb3NJbnN0YW5jZTtcblxuICBjb25zdHJ1Y3RvcigpIHtcbiAgICB0aGlzLmNsaWVudCA9IGF4aW9zLmNyZWF0ZSh7XG4gICAgICBiYXNlVVJMOiBwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19BUElfVVJMIHx8ICdodHRwczovL2RhYTFpdno3MHBuMmsuY2xvdWRmcm9udC5uZXQnLFxuICAgICAgdGltZW91dDogMTAwMDAsXG4gICAgICBoZWFkZXJzOiB7XG4gICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICB9LFxuICAgIH0pO1xuXG4gICAgLy8g44Os44K544Od44Oz44K544Kk44Oz44K/44O844K744OX44K/44O8XG4gICAgdGhpcy5jbGllbnQuaW50ZXJjZXB0b3JzLnJlc3BvbnNlLnVzZShcbiAgICAgIChyZXNwb25zZSkgPT4gcmVzcG9uc2UsXG4gICAgICAoZXJyb3IpID0+IHtcbiAgICAgICAgY29uc29sZS5lcnJvcignQVBJIEVycm9yOicsIGVycm9yKTtcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGVycm9yKTtcbiAgICAgIH1cbiAgICApO1xuICB9XG5cbiAgLy8g44OY44Or44K544OB44Kn44OD44KvXG4gIGFzeW5jIGhlYWx0aENoZWNrKCk6IFByb21pc2U8SGVhbHRoQ2hlY2s+IHtcbiAgICBjb25zdCByZXNwb25zZTogQXhpb3NSZXNwb25zZTxIZWFsdGhDaGVjaz4gPSBhd2FpdCB0aGlzLmNsaWVudC5nZXQoJy9hcGkvaGVhbHRoJyk7XG4gICAgcmV0dXJuIHJlc3BvbnNlLmRhdGE7XG4gIH1cblxuICAvLyBMYW1iZGEgSW50ZWdyYXRpb24g44OY44Or44K544OB44Kn44OD44KvXG4gIGFzeW5jIGxhbWJkYUhlYWx0aENoZWNrKCk6IFByb21pc2U8SGVhbHRoQ2hlY2s+IHtcbiAgICBjb25zdCByZXNwb25zZTogQXhpb3NSZXNwb25zZTxIZWFsdGhDaGVjaz4gPSBhd2FpdCB0aGlzLmNsaWVudC5nZXQoJy92MS9oZWFsdGgnKTtcbiAgICByZXR1cm4gcmVzcG9uc2UuZGF0YTtcbiAgfVxuXG4gIC8vIOOCu+ODg+OCt+ODp+ODs+euoeeQhlxuICBhc3luYyBnZXRTZXNzaW9uKCk6IFByb21pc2U8U2Vzc2lvbj4ge1xuICAgIGNvbnN0IHJlc3BvbnNlOiBBeGlvc1Jlc3BvbnNlPFNlc3Npb24+ID0gYXdhaXQgdGhpcy5jbGllbnQuZ2V0KCcvdjEvc2Vzc2lvbicpO1xuICAgIHJldHVybiByZXNwb25zZS5kYXRhO1xuICB9XG5cbiAgLy8g5qip6ZmQ56K66KqNXG4gIGFzeW5jIGdldFBlcm1pc3Npb25zKCk6IFByb21pc2U8c3RyaW5nW10+IHtcbiAgICBjb25zdCByZXNwb25zZTogQXhpb3NSZXNwb25zZTx7IHBlcm1pc3Npb25zOiBzdHJpbmdbXSB9PiA9IGF3YWl0IHRoaXMuY2xpZW50LmdldCgnL3YxL3Blcm1pc3Npb25zJyk7XG4gICAgcmV0dXJuIHJlc3BvbnNlLmRhdGEucGVybWlzc2lvbnM7XG4gIH1cblxuICAvLyDmlofmm7jkuIDopqflj5blvpdcbiAgYXN5bmMgZ2V0RG9jdW1lbnRzKCk6IFByb21pc2U8RG9jdW1lbnRbXT4ge1xuICAgIGNvbnN0IHJlc3BvbnNlOiBBeGlvc1Jlc3BvbnNlPHsgZG9jdW1lbnRzOiBEb2N1bWVudFtdIH0+ID0gYXdhaXQgdGhpcy5jbGllbnQuZ2V0KCcvdjEvZG9jdW1lbnRzJyk7XG4gICAgcmV0dXJuIHJlc3BvbnNlLmRhdGEuZG9jdW1lbnRzO1xuICB9XG5cbiAgLy8g5qSc57SiXG4gIGFzeW5jIHNlYXJjaChxdWVyeTogc3RyaW5nKTogUHJvbWlzZTxTZWFyY2hSZXN1bHQ+IHtcbiAgICBjb25zdCByZXNwb25zZTogQXhpb3NSZXNwb25zZTxTZWFyY2hSZXN1bHQ+ID0gYXdhaXQgdGhpcy5jbGllbnQucG9zdCgnL3YxL3NlYXJjaCcsIHsgcXVlcnkgfSk7XG4gICAgcmV0dXJuIHJlc3BvbnNlLmRhdGE7XG4gIH1cblxuICAvLyDjg63jgrDlj5blvpdcbiAgYXN5bmMgZ2V0TG9ncygpOiBQcm9taXNlPGFueVtdPiB7XG4gICAgY29uc3QgcmVzcG9uc2U6IEF4aW9zUmVzcG9uc2U8eyBsb2dzOiBhbnlbXSB9PiA9IGF3YWl0IHRoaXMuY2xpZW50LmdldCgnL3YxL2xvZ3MnKTtcbiAgICByZXR1cm4gcmVzcG9uc2UuZGF0YS5sb2dzO1xuICB9XG5cbiAgLy8g44Oh44OI44Oq44Kv44K55Y+W5b6XXG4gIGFzeW5jIGdldE1ldHJpY3MoKTogUHJvbWlzZTxhbnk+IHtcbiAgICBjb25zdCByZXNwb25zZTogQXhpb3NSZXNwb25zZTxhbnk+ID0gYXdhaXQgdGhpcy5jbGllbnQuZ2V0KCcvdjEvbWV0cmljcycpO1xuICAgIHJldHVybiByZXNwb25zZS5kYXRhO1xuICB9XG59XG5cbmV4cG9ydCBjb25zdCBhcGlDbGllbnQgPSBuZXcgQXBpQ2xpZW50KCk7XG5leHBvcnQgZGVmYXVsdCBhcGlDbGllbnQ7XG4iXX0=