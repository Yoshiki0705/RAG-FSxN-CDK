"use strict";
/**
 * 本番環境リソースID設定
 *
 * 注意: このファイルは環境固有の情報を含むため、
 * 実際の本番環境では環境変数やAWS Systems Manager Parameter Storeから取得することを推奨
 */
Object.defineProperty(exports, "__esModule", { value: true });
exports.getProductionResourceIds = getProductionResourceIds;
exports.validateResourceIds = validateResourceIds;
/**
 * 環境変数から本番リソースIDを取得
 */
function getProductionResourceIds() {
    return {
        vpcId: process.env.EXISTING_VPC_ID || 'vpc-09aa251d6db52b1fc',
        availabilityZones: (process.env.AVAILABILITY_ZONES?.split(',') || [
            'ap-northeast-1a',
            'ap-northeast-1c',
            'ap-northeast-1d'
        ]),
        privateSubnetIds: (process.env.EXISTING_PRIVATE_SUBNET_IDS?.split(',') || [
            'subnet-0a84a16a1641e970f',
            'subnet-0c4599b4863ff4d33',
            'subnet-0c9ad18a58c06e7c5'
        ]),
        publicSubnetIds: (process.env.EXISTING_PUBLIC_SUBNET_IDS?.split(',') || [
            'subnet-06a00a8866d09b912',
            'subnet-0d7c7e43c1325cd3b',
            'subnet-06df589d2ed2a5fc0'
        ]),
        documentsBucketName: process.env.EXISTING_DOCUMENTS_BUCKET || 'tokyoregion-permission-aw-storageconstructdocument-tavuxtzodhgz',
        embeddingsBucketName: process.env.EXISTING_EMBEDDINGS_BUCKET || 'tokyoregion-permission-aw-storageconstructembeddin-mp6fwdzbirdv',
        sessionTableName: process.env.EXISTING_SESSION_TABLE || 'TokyoRegion-permission-aware-rag-prod-Data-DatabaseConstructSessionTableB7A378FC-MAR9Z6MWLWDC',
        kmsKeyArn: process.env.EXISTING_KMS_KEY_ARN || 'arn:aws:kms:ap-northeast-1:178625946981:key/781ad5cd-8b6b-4d11-9146-dab63a2147d6'
    };
}
/**
 * リソースIDの検証
 */
function validateResourceIds(resourceIds) {
    const requiredFields = [
        'vpcId', 'documentsBucketName', 'embeddingsBucketName',
        'sessionTableName', 'kmsKeyArn'
    ];
    for (const field of requiredFields) {
        if (!resourceIds[field]) {
            throw new Error(`必須リソースID が設定されていません: ${field}`);
        }
    }
    // VPC IDの形式チェック
    if (!resourceIds.vpcId.match(/^vpc-[a-f0-9]{8,17}$/)) {
        throw new Error(`無効なVPC ID形式: ${resourceIds.vpcId}`);
    }
    // KMS ARNの形式チェック
    if (!resourceIds.kmsKeyArn.match(/^arn:aws:kms:[a-z0-9-]+:[0-9]{12}:key\/[a-f0-9-]{36}$/)) {
        throw new Error(`無効なKMS ARN形式: ${resourceIds.kmsKeyArn}`);
    }
    console.log('✅ リソースID検証完了');
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicHJvZHVjdGlvbi1yZXNvdXJjZS1pZHMuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJwcm9kdWN0aW9uLXJlc291cmNlLWlkcy50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO0FBQUE7Ozs7O0dBS0c7O0FBZ0JILDREQXVCQztBQUtELGtEQXVCQztBQXRERDs7R0FFRztBQUNILFNBQWdCLHdCQUF3QjtJQUN0QyxPQUFPO1FBQ0wsS0FBSyxFQUFFLE9BQU8sQ0FBQyxHQUFHLENBQUMsZUFBZSxJQUFJLHVCQUF1QjtRQUM3RCxpQkFBaUIsRUFBRSxDQUFDLE9BQU8sQ0FBQyxHQUFHLENBQUMsa0JBQWtCLEVBQUUsS0FBSyxDQUFDLEdBQUcsQ0FBQyxJQUFJO1lBQ2hFLGlCQUFpQjtZQUNqQixpQkFBaUI7WUFDakIsaUJBQWlCO1NBQ2xCLENBQVU7UUFDWCxnQkFBZ0IsRUFBRSxDQUFDLE9BQU8sQ0FBQyxHQUFHLENBQUMsMkJBQTJCLEVBQUUsS0FBSyxDQUFDLEdBQUcsQ0FBQyxJQUFJO1lBQ3hFLDBCQUEwQjtZQUMxQiwwQkFBMEI7WUFDMUIsMEJBQTBCO1NBQzNCLENBQVU7UUFDWCxlQUFlLEVBQUUsQ0FBQyxPQUFPLENBQUMsR0FBRyxDQUFDLDBCQUEwQixFQUFFLEtBQUssQ0FBQyxHQUFHLENBQUMsSUFBSTtZQUN0RSwwQkFBMEI7WUFDMUIsMEJBQTBCO1lBQzFCLDBCQUEwQjtTQUMzQixDQUFVO1FBQ1gsbUJBQW1CLEVBQUUsT0FBTyxDQUFDLEdBQUcsQ0FBQyx5QkFBeUIsSUFBSSxpRUFBaUU7UUFDL0gsb0JBQW9CLEVBQUUsT0FBTyxDQUFDLEdBQUcsQ0FBQywwQkFBMEIsSUFBSSxpRUFBaUU7UUFDakksZ0JBQWdCLEVBQUUsT0FBTyxDQUFDLEdBQUcsQ0FBQyxzQkFBc0IsSUFBSSwrRkFBK0Y7UUFDdkosU0FBUyxFQUFFLE9BQU8sQ0FBQyxHQUFHLENBQUMsb0JBQW9CLElBQUksa0ZBQWtGO0tBQ2xJLENBQUM7QUFDSixDQUFDO0FBRUQ7O0dBRUc7QUFDSCxTQUFnQixtQkFBbUIsQ0FBQyxXQUFrQztJQUNwRSxNQUFNLGNBQWMsR0FBb0M7UUFDdEQsT0FBTyxFQUFFLHFCQUFxQixFQUFFLHNCQUFzQjtRQUN0RCxrQkFBa0IsRUFBRSxXQUFXO0tBQ2hDLENBQUM7SUFFRixLQUFLLE1BQU0sS0FBSyxJQUFJLGNBQWMsRUFBRSxDQUFDO1FBQ25DLElBQUksQ0FBQyxXQUFXLENBQUMsS0FBSyxDQUFDLEVBQUUsQ0FBQztZQUN4QixNQUFNLElBQUksS0FBSyxDQUFDLHdCQUF3QixLQUFLLEVBQUUsQ0FBQyxDQUFDO1FBQ25ELENBQUM7SUFDSCxDQUFDO0lBRUQsZ0JBQWdCO0lBQ2hCLElBQUksQ0FBQyxXQUFXLENBQUMsS0FBSyxDQUFDLEtBQUssQ0FBQyxzQkFBc0IsQ0FBQyxFQUFFLENBQUM7UUFDckQsTUFBTSxJQUFJLEtBQUssQ0FBQyxnQkFBZ0IsV0FBVyxDQUFDLEtBQUssRUFBRSxDQUFDLENBQUM7SUFDdkQsQ0FBQztJQUVELGlCQUFpQjtJQUNqQixJQUFJLENBQUMsV0FBVyxDQUFDLFNBQVMsQ0FBQyxLQUFLLENBQUMsdURBQXVELENBQUMsRUFBRSxDQUFDO1FBQzFGLE1BQU0sSUFBSSxLQUFLLENBQUMsaUJBQWlCLFdBQVcsQ0FBQyxTQUFTLEVBQUUsQ0FBQyxDQUFDO0lBQzVELENBQUM7SUFFRCxPQUFPLENBQUMsR0FBRyxDQUFDLGNBQWMsQ0FBQyxDQUFDO0FBQzlCLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIOacrOeVqueSsOWig+ODquOCveODvOOCuUlE6Kit5a6aXG4gKiBcbiAqIOazqOaEjzog44GT44Gu44OV44Kh44Kk44Or44Gv55Kw5aKD5Zu65pyJ44Gu5oOF5aCx44KS5ZCr44KA44Gf44KB44CBXG4gKiDlrp/pmpvjga7mnKznlarnkrDlooPjgafjga/nkrDlooPlpInmlbDjgoRBV1MgU3lzdGVtcyBNYW5hZ2VyIFBhcmFtZXRlciBTdG9yZeOBi+OCieWPluW+l+OBmeOCi+OBk+OBqOOCkuaOqOWlqFxuICovXG5cbmV4cG9ydCBpbnRlcmZhY2UgUHJvZHVjdGlvblJlc291cmNlSWRzIHtcbiAgcmVhZG9ubHkgdnBjSWQ6IHN0cmluZztcbiAgcmVhZG9ubHkgYXZhaWxhYmlsaXR5Wm9uZXM6IHJlYWRvbmx5IHN0cmluZ1tdO1xuICByZWFkb25seSBwcml2YXRlU3VibmV0SWRzOiByZWFkb25seSBzdHJpbmdbXTtcbiAgcmVhZG9ubHkgcHVibGljU3VibmV0SWRzOiByZWFkb25seSBzdHJpbmdbXTtcbiAgcmVhZG9ubHkgZG9jdW1lbnRzQnVja2V0TmFtZTogc3RyaW5nO1xuICByZWFkb25seSBlbWJlZGRpbmdzQnVja2V0TmFtZTogc3RyaW5nO1xuICByZWFkb25seSBzZXNzaW9uVGFibGVOYW1lOiBzdHJpbmc7XG4gIHJlYWRvbmx5IGttc0tleUFybjogc3RyaW5nO1xufVxuXG4vKipcbiAqIOeSsOWig+WkieaVsOOBi+OCieacrOeVquODquOCveODvOOCuUlE44KS5Y+W5b6XXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRQcm9kdWN0aW9uUmVzb3VyY2VJZHMoKTogUHJvZHVjdGlvblJlc291cmNlSWRzIHtcbiAgcmV0dXJuIHtcbiAgICB2cGNJZDogcHJvY2Vzcy5lbnYuRVhJU1RJTkdfVlBDX0lEIHx8ICd2cGMtMDlhYTI1MWQ2ZGI1MmIxZmMnLFxuICAgIGF2YWlsYWJpbGl0eVpvbmVzOiAocHJvY2Vzcy5lbnYuQVZBSUxBQklMSVRZX1pPTkVTPy5zcGxpdCgnLCcpIHx8IFtcbiAgICAgICdhcC1ub3J0aGVhc3QtMWEnLCBcbiAgICAgICdhcC1ub3J0aGVhc3QtMWMnLCBcbiAgICAgICdhcC1ub3J0aGVhc3QtMWQnXG4gICAgXSkgYXMgY29uc3QsXG4gICAgcHJpdmF0ZVN1Ym5ldElkczogKHByb2Nlc3MuZW52LkVYSVNUSU5HX1BSSVZBVEVfU1VCTkVUX0lEUz8uc3BsaXQoJywnKSB8fCBbXG4gICAgICAnc3VibmV0LTBhODRhMTZhMTY0MWU5NzBmJyxcbiAgICAgICdzdWJuZXQtMGM0NTk5YjQ4NjNmZjRkMzMnLCBcbiAgICAgICdzdWJuZXQtMGM5YWQxOGE1OGMwNmU3YzUnXG4gICAgXSkgYXMgY29uc3QsXG4gICAgcHVibGljU3VibmV0SWRzOiAocHJvY2Vzcy5lbnYuRVhJU1RJTkdfUFVCTElDX1NVQk5FVF9JRFM/LnNwbGl0KCcsJykgfHwgW1xuICAgICAgJ3N1Ym5ldC0wNmEwMGE4ODY2ZDA5YjkxMicsXG4gICAgICAnc3VibmV0LTBkN2M3ZTQzYzEzMjVjZDNiJyxcbiAgICAgICdzdWJuZXQtMDZkZjU4OWQyZWQyYTVmYzAnXG4gICAgXSkgYXMgY29uc3QsXG4gICAgZG9jdW1lbnRzQnVja2V0TmFtZTogcHJvY2Vzcy5lbnYuRVhJU1RJTkdfRE9DVU1FTlRTX0JVQ0tFVCB8fCAndG9reW9yZWdpb24tcGVybWlzc2lvbi1hdy1zdG9yYWdlY29uc3RydWN0ZG9jdW1lbnQtdGF2dXh0em9kaGd6JyxcbiAgICBlbWJlZGRpbmdzQnVja2V0TmFtZTogcHJvY2Vzcy5lbnYuRVhJU1RJTkdfRU1CRURESU5HU19CVUNLRVQgfHwgJ3Rva3lvcmVnaW9uLXBlcm1pc3Npb24tYXctc3RvcmFnZWNvbnN0cnVjdGVtYmVkZGluLW1wNmZ3ZHpiaXJkdicsXG4gICAgc2Vzc2lvblRhYmxlTmFtZTogcHJvY2Vzcy5lbnYuRVhJU1RJTkdfU0VTU0lPTl9UQUJMRSB8fCAnVG9reW9SZWdpb24tcGVybWlzc2lvbi1hd2FyZS1yYWctcHJvZC1EYXRhLURhdGFiYXNlQ29uc3RydWN0U2Vzc2lvblRhYmxlQjdBMzc4RkMtTUFSOVo2TVdMV0RDJyxcbiAgICBrbXNLZXlBcm46IHByb2Nlc3MuZW52LkVYSVNUSU5HX0tNU19LRVlfQVJOIHx8ICdhcm46YXdzOmttczphcC1ub3J0aGVhc3QtMToxNzg2MjU5NDY5ODE6a2V5Lzc4MWFkNWNkLThiNmItNGQxMS05MTQ2LWRhYjYzYTIxNDdkNidcbiAgfTtcbn1cblxuLyoqXG4gKiDjg6rjgr3jg7zjgrlJROOBruaknOiovFxuICovXG5leHBvcnQgZnVuY3Rpb24gdmFsaWRhdGVSZXNvdXJjZUlkcyhyZXNvdXJjZUlkczogUHJvZHVjdGlvblJlc291cmNlSWRzKTogdm9pZCB7XG4gIGNvbnN0IHJlcXVpcmVkRmllbGRzOiAoa2V5b2YgUHJvZHVjdGlvblJlc291cmNlSWRzKVtdID0gW1xuICAgICd2cGNJZCcsICdkb2N1bWVudHNCdWNrZXROYW1lJywgJ2VtYmVkZGluZ3NCdWNrZXROYW1lJywgXG4gICAgJ3Nlc3Npb25UYWJsZU5hbWUnLCAna21zS2V5QXJuJ1xuICBdO1xuXG4gIGZvciAoY29uc3QgZmllbGQgb2YgcmVxdWlyZWRGaWVsZHMpIHtcbiAgICBpZiAoIXJlc291cmNlSWRzW2ZpZWxkXSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGDlv4XpoIjjg6rjgr3jg7zjgrlJRCDjgYzoqK3lrprjgZXjgozjgabjgYTjgb7jgZvjgpM6ICR7ZmllbGR9YCk7XG4gICAgfVxuICB9XG5cbiAgLy8gVlBDIElE44Gu5b2i5byP44OB44Kn44OD44KvXG4gIGlmICghcmVzb3VyY2VJZHMudnBjSWQubWF0Y2goL152cGMtW2EtZjAtOV17OCwxN30kLykpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoYOeEoeWKueOBqlZQQyBJROW9ouW8jzogJHtyZXNvdXJjZUlkcy52cGNJZH1gKTtcbiAgfVxuXG4gIC8vIEtNUyBBUk7jga7lvaLlvI/jg4Hjgqfjg4Pjgq9cbiAgaWYgKCFyZXNvdXJjZUlkcy5rbXNLZXlBcm4ubWF0Y2goL15hcm46YXdzOmttczpbYS16MC05LV0rOlswLTldezEyfTprZXlcXC9bYS1mMC05LV17MzZ9JC8pKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKGDnhKHlirnjgapLTVMgQVJO5b2i5byPOiAke3Jlc291cmNlSWRzLmttc0tleUFybn1gKTtcbiAgfVxuXG4gIGNvbnNvbGUubG9nKCfinIUg44Oq44K944O844K5SUTmpJzoqLzlrozkuoYnKTtcbn0iXX0=